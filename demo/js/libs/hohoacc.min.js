/*!
 * HoHoAcc jQuery accordeon plugin.
 *
 * Copyright (c) 2012, Max Shishkin.
 * Licensed under the MIT license.
 */(function(e,t,n,r){"use strict";var i={use:function(e,t,n){return n=n||[],i[e].apply(t,n)},parseOpts:function(t){var n=this,r={},t=t||{};return r.panelWidth=n.$elem.data("panelwidth")||t.panelWidth||e.fn.hoHoAcc.options.panelWidth,r.easing=n.$elem.data("easing")||t.easing||e.fn.hoHoAcc.options.easing,r.gapMin=parseInt(n.$elem.data("gapmin"),10),isNaN(r.gapMin)&&(r.gapMin=t.gapMin>=0?t.gapMin:e.fn.hoHoAcc.options.gapMin),r.gapMax=parseInt(n.$elem.data("gapmax"),10),isNaN(r.gapMax)&&(r.gapMax=t.gapMax>=0?t.gapMax:e.fn.hoHoAcc.options.gapMax),r.speed=parseInt(n.$elem.data("speed"),10),isNaN(r.speed)&&(r.speed=t.speed>=0?t.speed:e.fn.hoHoAcc.options.speed),r},processOpts:function(){var e=this;typeof e.opts.panelWidth=="string"&&(e.opts.panelWidth.substring(e.opts.panelWidth.length-1)==="%"?e.opts.panelWidth=parseInt(e.opts.panelWidth,10)/100*e.$elem.width():e.opts.panelWidth=parseInt(e.opts.panelWidth,10)),e.opts.panelWidth>e.$elem.width()&&(e.opts.panelWidth=e.$elem.width()*.7),e.opts.panelWidth=Math.floor(e.opts.panelWidth),e.opts.teaserCollapsedWidth=Math.floor((e.$elem.width()-e.opts.panelWidth-e.opts.gapMin*(e.$panels.length-1))/(e.$panels.length-1)),e.opts.teaserExpandedWidth=Math.floor((e.$elem.width()-e.opts.gapMax*(e.$panels.length-1))/e.$panels.length),e.opts.coords=[]},initContentContainers:function(){var t=this,n;e.each(t.$panels,function(){n=e('<div class="content"></div>'),n.html(this.html()),this.html(n)})},layoutContentContainers:function(){var t=this,n;e.each(t.$panels,function(){n=this.children(".content"),n.css({width:t.opts.panelWidth}),this.hasClass("panel-centered")?n.css("left",-t.opts.panelWidth/2):this.hasClass("panel-righted")&&n.css("left",-t.opts.panelWidth)})},adjustPanelsSize:function(){var t=this,n=t.$elem.height();n===0&&(e.each(t.$panels,function(){n=Math.max(this.outerHeight(),n)}),t.$elem.height(n)),e.each(t.$panels,function(){this.css({width:t.opts.teaserExpandedWidth,height:n})})},addPanelClasses:function(){var t=this;e.each(t.$panels,function(e){this.addClass("panel"+(e+1))})},layoutPanels:function(){var t=this;e.each(t.$panels,function(e){this.css({left:e*(t.opts.teaserExpandedWidth+t.opts.gapMax),"z-index":t.$panels.length-e})})},cacheCoords:function(){var t=this;e.each(t.$panels,function(e){t.opts.coords[e]=parseInt(this.css("left"),10)})},addListeners:function(){var t=this;e.each(t.$panels,function(e){this.on("mouseenter",function(){t.expandPanel(e)}).on("mouseleave",function(){t.collapsePanel(e)})})},indexBounds:function(e){var t=this;return e>=0&&e<t.$panels.length}},s={expandPanel:function(t){var n=this,r=t,s=n.opts.coords,o=n.opts.teaserExpandedWidth-n.opts.teaserCollapsedWidth,u=0,a=n.opts.gapMax-n.opts.gapMin,f=!0,l,c,h;if(!i.use("indexBounds",n,[t]))return;h=e.Event("expandPanelStart"),h.panel=n.$panels[r],h.panelIndex=r,n.$elem.trigger(h),e.each(n.$panels,function(e){e!==r?(l=n.opts.teaserCollapsedWidth,f?(this.addClass("panel-left"),c=s[e]-u,u+=o+a):(this.addClass("panel-right"),c=s[e]+u,u-=o+a)):(this.addClass("active"),l=n.opts.panelWidth,c=s[e]-u,f=!1,u=n.opts.panelWidth-n.opts.teaserExpandedWidth-u-a),this.stop().animate({width:l,left:c},n.opts.speed,n.opts.easing)}),h=e.Event("expandPanelEnd"),h.panel=n.$panels[r],h.panelIndex=r,n.$elem.trigger(h)},collapsePanel:function(t){var n=this,r=n.opts.coords,s;if(!i.use("indexBounds",n,[t]))return;s=e.Event("collapsePanelStart"),s.panel=n.$panels[t],s.panelIndex=t,n.$elem.trigger(s),e.each(n.$panels,function(e){this.removeClass("active panel-left panel-right"),this.stop().animate({width:n.opts.teaserExpandedWidth,left:r[e]},n.opts.speed,n.opts.easing)}),s=e.Event("collapsePanelEnd"),s.panel=n.$panels[t],s.panelIndex=t,n.$elem.trigger(s)},rebuild:function(t){var n=this,t=t||{};n.optsDefault=e.extend({},n.optsDefault,t),n.opts=e.extend({},n.optsDefault),i.use("processOpts",n),i.use("layoutContentContainers",n),i.use("adjustPanelsSize",n),i.use("layoutPanels",n),i.use("cacheCoords",n)}},o=function(t,n){var r=this;r.elem=n,r.$elem=e(n),r.optsDefault=i.use("parseOpts",r,[t]),r.opts=e.extend({},r.optsDefault),r.$panels=[],r.$elem.children(".panel").each(function(){r.$panels.push(e(this))}),i.use("processOpts",r),i.use("initContentContainers",r),i.use("layoutContentContainers",r),i.use("adjustPanelsSize",r),i.use("addPanelClasses",r),i.use("layoutPanels",r),i.use("cacheCoords",r),i.use("addListeners",r)};o.prototype=s,e.fn.hoHoAcc=function(t){return this.each(function(){var n=new o(t,this);e.data(this,"hoHoAcc",n)})},e.fn.hoHoAcc.options={panelWidth:"70%",gapMin:0,gapMax:0,speed:200,easing:"swing"}})(window.jQuery,window,document);